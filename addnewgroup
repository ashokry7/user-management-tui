# !/bin/bash

NAME=""

NEW_GROUP_MESSAGE="Enter New Group Name"
GROUP_EXIST_MESSAGE="Group Exists, Try another name"

#NEW_PASS_MESSAGE="New Password"
#CONFIRM_PASS_MESSAGE="Confirm New Password"


check_for_cancel () {

    # If user chose to cancel the operation, perform exit sequence
    if [ "$?" != 0 ]; then
        whiptail --title "Done" --msgbox "Operation Canceled" 8 78
        exit
    fi
}

# display an input box to enter a name for the new group
prompt_group_name () {
    
    NAME=$(whiptail --inputbox "Group Name: " 8 39 --title "$1" 3>&1 1>&2 2>&3)
    check_for_cancel
}

# confirm the new group name is not used, if used, ask again
ask_group_name () {

    prompt_group_name "$NEW_GROUP_MESSAGE"

    
    while [ -z "$NAME" ]
	do
		prompt_group_name "Name Cannot be Empty"
    done

    ISEXIST=$(grep "$NAME" /etc/group)

    while [ "$ISEXIST" != "" ] 
        do
            prompt_group_name "$GROUP_EXIST_MESSAGE"
            #id "$NAME" &>> /dev/null
	    ISEXIST=$(grep "$NAME" /etc/group)
    done

    groupadd "$NAME" &>> /dev/null

    if [ "$?" = 0 ];then
	whiptail --title "Done" --msgbox "Group $NAME Successfully added" 8 78
    fi
}
    # if [ "$?" = 0 ];then
    #     whiptail --title "Done" --msgbox "User $NAME successfully added" 8 78

# PASS=$(whiptail --passwordbox "Enter password: " \
# 8 78 \--title "")
ask_group_name
